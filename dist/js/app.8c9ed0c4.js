(function(){"use strict";var t={7637:function(t,e,i){var s=i(2856),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},o=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("span",{staticClass:"radio"},[e("el-radio-group",{model:{value:t.showType,callback:function(e){t.showType=e},expression:"showType"}},[e("el-radio-button",{attrs:{label:"Preview"}}),e("el-radio-button",{attrs:{label:"Code"}})],1)],1),e("div",{ref:"config",staticClass:"config"},[e("div",{staticClass:"top",on:{click:function(e){return t.back()}}},[e("i",{staticClass:"fa-solid fa-arrow-left arrow"}),t._v("back")]),e("div",{staticClass:"geometry"},[e("div",{staticClass:"title"},[t._v("Geometry")]),e("div",{staticClass:"dimension"},[t._v(" dimension: "),e("el-input-number",{staticClass:"dimension_input",attrs:{"controls-position":"right",min:1,max:3},on:{change:function(e){return t.changeDimension()}},model:{value:t.geo.dimension,callback:function(e){t.$set(t.geo,"dimension",e)},expression:"geo.dimension"}})],1),e("div",{staticClass:"wireframe"},[t._v(" WireFrame: "),e("el-switch",{staticClass:"normalize_switch",attrs:{"active-color":"#13ce66"},on:{change:function(e){return t.toggleWireFrame()}},model:{value:t.geo.wireframe,callback:function(e){t.$set(t.geo,"wireframe",e)},expression:"geo.wireframe"}})],1),e("div",{staticClass:"geo_subTitle"},[t._v("Mesh")]),e("div",{staticClass:"mesh"},[e("el-upload",{staticClass:"upload",attrs:{action:"",accept:".stl,.vtp","http-request":t.handleUpload,"on-remove":t.handleRemove,"on-preview":t.handlePreview,multiple:"","file-list":t.geo.fileList,drag:""}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("將文件拖到此處，或"),e("em",[t._v("點擊上傳")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上傳 STL 文件")])]),e("div",{staticClass:"fileList"},t._l(t.geo.fileDetail,(function(i,s){return e("div",{key:s,staticClass:"fileItem"},[e("div",{staticClass:"fileTitle"},[t._v(t._s(i.file.name)+" ("+t._s((i.file.size/1024).toFixed(2))+" KB)")]),e("div",{staticClass:"fileOption"},[t._v(" name: "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.name,expression:"item.name"}],staticClass:"fileOption_name",attrs:{type:"text"},domProps:{value:i.name},on:{input:function(e){e.target.composing||t.$set(i,"name",e.target.value)}}}),t._v("   airtight: "),e("select",{directives:[{name:"model",rawName:"v-model",value:i.airtight,expression:"item.airtight"}],staticClass:"fileOption_airtight",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(i,"airtight",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"True"}},[t._v("True")]),e("option",{attrs:{value:"False"}},[t._v("False")])])])])})),0)],1),e("div",{staticClass:"geo_subTitle"},[t._v("Center")]),e("div",{staticClass:"center"},[e("div",{staticClass:"pos-box"},[e("div",{staticClass:"pos"},[t._v("x: "),e("el-input",{staticClass:"pos-input",attrs:{placeholder:"请输入内容"},model:{value:t.geo.pos.x,callback:function(e){t.$set(t.geo.pos,"x",e)},expression:"geo.pos.x"}})],1),e("div",{staticClass:"pos"},[t._v("y: "),e("el-input",{staticClass:"pos-input",attrs:{placeholder:"请输入内容"},model:{value:t.geo.pos.y,callback:function(e){t.$set(t.geo.pos,"y",e)},expression:"geo.pos.y"}})],1),e("div",{staticClass:"pos"},[t._v("z: "),e("el-input",{staticClass:"pos-input",attrs:{placeholder:"请输入内容"},model:{value:t.geo.pos.z,callback:function(e){t.$set(t.geo.pos,"z",e)},expression:"geo.pos.z"}})],1)]),e("div",{staticClass:"pos_exec"},[t._v(" Normalize:"),e("el-switch",{staticClass:"normalize_switch",attrs:{"active-color":"#13ce66"},model:{value:t.geo.pos_normalize,callback:function(e){t.$set(t.geo,"pos_normalize",e)},expression:"geo.pos_normalize"}}),e("el-button",{staticClass:"normalize_btn",attrs:{type:"primary"},on:{click:function(e){return t.getCenter()}}},[t._v("Get Center")])],1)]),e("div",{staticClass:"geo_subTitle"},[t._v("Scale")]),e("div",{staticClass:"scale"},[t._v(" factor: "),e("el-input-number",{staticClass:"dimension_input",attrs:{"controls-position":"right",min:1},on:{change:function(e){return t.changeScale()}},model:{value:t.geo.factor,callback:function(e){t.$set(t.geo,"factor",e)},expression:"geo.factor"}}),e("el-checkbox",{staticClass:"factor_normalize",model:{value:t.geo.factor_normailize,callback:function(e){t.$set(t.geo,"factor_normailize",e)},expression:"geo.factor_normailize"}},[t._v("正規化")])],1)]),e("div",{staticClass:"function_part"},[e("div",{staticClass:"title"},[t._v("Parameter")]),e("div",{staticClass:"add"},[e("el-select",{staticClass:"add-select",attrs:{placeholder:"请選擇"},model:{value:t.parameter_type,callback:function(e){t.parameter_type=e},expression:"parameter_type"}},[t._l(t.parameter,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),e("el-option",{attrs:{label:"Code Block",value:"Code Block"}})],2),""!=t.parameter_type&&"Code Block"!=t.parameter_type?e("el-select",{staticClass:"add-select",attrs:{placeholder:"请選擇"},model:{value:t.parameter_selected,callback:function(e){t.parameter_selected=e},expression:"parameter_selected"}},t._l(t.options,(function(t){return e("el-option",{key:t.function,attrs:{label:t.function,value:t.function}})})),1):t._e(),e("el-button",{staticClass:"add-btn",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addItem()}}},[t._v("新增")])],1),e("grid-layout",{staticClass:"layout",attrs:{layout:t.layout,"col-num":1,rowHeight:40,"is-draggable":t.isDraggable,"is-resizable":!0,"is-mirrored":!1,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!0},on:{"update:layout":function(e){t.layout=e},"layout-updated":function(e){return t.updateOrder()}}},t._l(t.layout,(function(i){return e("grid-item",{key:i.i,staticClass:"layout-item",attrs:{x:i.x,y:i.y,w:i.w,h:i.h,i:i.i}},["Code Block"!=i.type?e("div",[e("div",{staticClass:"func_name"},[t._v(" "+t._s(i.detail.function)+" "),e("div",{staticClass:"delete",on:{click:function(e){return t.deleteItem(i.i)}}},[e("i",{staticClass:"el-icon-delete"})])]),t._l(i.detail.property,(function(s,a){return e("div",{key:a,staticClass:"property"},[t._v(" "+t._s("object"!=typeof s?s:s.type)+": "),"object"!=typeof s?e("el-input",{staticClass:"property-input",attrs:{placeholder:"請輸入內容"},model:{value:t.layout_values[`${i.i}_${i.detail.function}_${s}`],callback:function(e){t.$set(t.layout_values,`${i.i}_${i.detail.function}_${s}`,e)},expression:"layout_values[`${item.i}_${item.detail.function}_${p}`]"}}):e("span",[e("el-input",{staticClass:"property-select",attrs:{placeholder:"請輸入內容"},on:{focus:function(e){return t.tips(s.type,s.options)}},model:{value:t.layout_values[`${i.i}_${i.detail.function}_${s.type}`],callback:function(e){t.$set(t.layout_values,`${i.i}_${i.detail.function}_${s.type}`,e)},expression:"layout_values[`${item.i}_${item.detail.function}_${p.type}`]"}})],1)],1)}))],2):e("div",[e("div",{staticClass:"func_name"},[t._v(" "+t._s(i.type)+" "),e("div",{staticClass:"upload_code",on:{click:function(e){return t.uploadCode(i.i)}}},[e("i",{staticClass:"el-icon-upload2"})]),e("div",{staticClass:"delete",on:{click:function(e){return t.deleteItem(i.i)}}},[e("i",{staticClass:"el-icon-delete"})]),e("input",{ref:`${i.i}_code_file`,refInFor:!0,staticClass:"code_file",attrs:{type:"file"},on:{change:function(e){return t.handleUploadCode(i.i,i.type)}}})]),e("div",{staticClass:"inputCode"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.layout_values[`${i.i}_${i.type}`],expression:"layout_values[`${item.i}_${item.type}`]"}],ref:`${i.i}_textArea`,refInFor:!0,staticClass:"textArea",domProps:{value:t.layout_values[`${i.i}_${i.type}`]},on:{keydown:t.handleTab,focus:function(e){t.isDraggable=!1},blur:function(e){t.isDraggable=!0},input:function(e){e.target.composing||t.$set(t.layout_values,`${i.i}_${i.type}`,e.target.value)}}})])])])})),1)],1),e("el-button",{staticClass:"send",attrs:{type:"primary",loading:t.isSending},on:{click:function(e){return t.collect()}}},[t._v(t._s(t.isSending?"資料建構中":"確認送出"))])],1),e("div",{staticClass:"content"},[e("stl-viewer",{directives:[{name:"show",rawName:"v-show",value:"Preview"==t.showType,expression:"showType=='Preview'"}]}),e("code-viewer",{directives:[{name:"show",rawName:"v-show",value:"Code"==t.showType,expression:"showType=='Code'"}]})],1)])},r=[],l=(i(4114),i(1176)),c=i.n(l),u=JSON.parse('{"ah":{"NavierStokes":{"function":"NavierStokes","property":["name","nu","rho","dim",{"type":"time","options":["True","False"]}]},"NormalDotVec":{"function":"NormalDotVec","property":["name",{"type":"vec","options":["[\'u\',\'v\',\'w\']","[\'u\',\'v\']","[\'u\']"]}]}},"o_":{"FullyConnectedArch":{"function":"FullyConnectedArch","property":["name",{"type":"input_keys","options":["[\'x\',\'y\',\'z\']","[\'x\',\'y\']","[\'x\']"]},{"type":"output_keys","options":["[\'u\',\'v\',\'w\',\'p\']","[\'u\',\'v\',\'p\']","[\'u\',\'p\']"]},"layer_size","nr_layers",{"type":"adaptive_activations","options":["True","False"]}]},"FourierNetArch":{"function":"FourierNetArch","property":["name",{"type":"input_keys","options":["[\'x\',\'y\',\'z\']","[\'x\',\'y\']","[\'x\']"]},{"type":"output_keys","options":["[\'u\',\'v\',\'w\',\'p\']","[\'u\',\'v\',\'p\']","[\'u\',\'p\']"]},"layer_size","nr_layers",{"type":"adaptive_activations","options":["True","False"]}]}},"_$":{"PointwiseBoundaryConstraint":{"function":"PointwiseBoundaryConstraint","property":["name","nodes","geometry","outvar","batch_size","bounds","criteria","lambda_weighting"]},"PointwiseInteriorConstraint":{"function":"PointwiseInteriorConstraint","property":["name","nodes","geometry","outvar","batch_size","bounds","criteria","lambda_weighting"]},"IntegralBoundaryConstraint":{"function":"IntegralBoundaryConstraint","property":["name","nodes","geometry","outvar","batch_size","bounds","criteria","lambda_weighting"]}}}'),d=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"container"})},h=[],p=i(9318),m=i(8857),f=i(5729),v={name:"StlViewer",data(){return{scene:null,camera:null,renderer:null,mesh:null,controls:null}},watch:{"$refs.container.clientWidth":function(t){this.renderer.setSize(t,this.$refs.container.clientHeight),this.camera.aspect=t/this.$refs.container.clientHeight,this.camera.updateProjectionMatrix()},"$refs.container.clientHeight":function(t){this.renderer.setSize(this.$refs.container.clientWidth,t),this.camera.aspect=this.$refs.container.clientWidth/t,this.camera.updateProjectionMatrix()}},mounted(){this.$bus.$on("loadStlFile",this.loadFile),this.$bus.$on("removeStlFile",this.removeMesh),this.$bus.$on("handleStlConfig",this.handleConfig),this.$bus.$on("getStlCenter",this.getCenter),this.$bus.$on("handleWireFrame",this.handleWireFrame);const t=this.$refs.container;this.scene=new p.Z58,this.camera=new p.ubm(75,t.clientWidth/t.clientHeight,.1,1e3),this.camera.position.set(5,10,5),this.camera.lookAt(0,0,0),this.renderer=new p.JeP,this.renderer.setSize(t.clientWidth,t.clientHeight),this.renderer.setClearColor(16777215),t.appendChild(this.renderer.domElement);const e=new p.ZyN(16777215,1);e.position.set(1,1,1).normalize(),this.scene.add(e);const i=new p.$p8(4210752);this.scene.add(i),this.gridHelper=new p.fTw(1e3,1e3),this.scene.add(this.gridHelper);const s=new p.IzY(1e3);this.scene.add(s),this.controls=new f.N(this.camera,this.renderer.domElement),this.controls.enableRotate=!0,this.controls.enablePan=!0,this.controls.addEventListener("change",this.renderScene),this.renderer.render(this.scene,this.camera)},methods:{renderScene(){this.renderer.render(this.scene,this.camera)},handleWireFrame(t){this.scene.traverse((e=>{e instanceof p.eaF&&(e.material.wireframe=t)}))},getCenter(t){const e=[],i=new p.Pq0;this.scene.traverse((t=>{t instanceof p.eaF&&e.push(t)})),e.forEach((t=>{t.geometry.computeBoundingBox();const e=t.geometry.boundingBox,s=new p.Pq0;e.getCenter(s),i.add(s)})),i.divideScalar(e.length),t&&(e.forEach((t=>{t.geometry.translate(-i.x,-i.y,-i.z)})),i.normalize()),this.$bus.$emit("setCenter",i.x,i.y,i.z)},handleConfig(t,e){if("scale"==t){const t=(new p.NRn).setFromObject(this.mesh),i=new p.Pq0;t.getSize(i);const s=Math.max(i.x,i.y,i.z),a=e.factor/s;this.scene.traverse((function(t){t instanceof p.eaF&&(t.scale.x*=a,t.scale.y*=a,t.scale.z*=a)}))}},removeMesh(t){const e=this.scene.getObjectByName(t);e&&(this.scene.remove(e),e.geometry.dispose(),e.material.dispose()),this.getCenter()},loadFile(t,e){const i=new FileReader;i.onload=i=>{const s=i.target.result,a=new m.t,o=a.parse(s),n=new p.tXL({color:6316128,specular:1118481,shininess:200,wireframe:e.wireframe});this.mesh=new p.eaF(o,n),this.mesh.name=t.uid;const r=(new p.NRn).setFromObject(this.mesh),l=new p.Pq0;r.getSize(l);const c=Math.max(l.x,l.y,l.z),u=e.factor/c;this.mesh.scale.set(u,u,u),this.scene.add(this.mesh),this.getCenter(e.center_normalize)},i.readAsArrayBuffer(t)}}},g=v,y=i(1656),_=(0,y.A)(g,d,h,!1,null,"28359968",null),C=_.exports,b=function(){var t=this,e=t._self._c;return e("div",[""!=t.code?e("div",{staticClass:"codeBlock",domProps:{innerHTML:t._s(t.code)}}):t._e(),e("el-empty",{staticClass:"codeBlock",attrs:{description:"Nothing Here"}})],1)},w=[],$=i(2143),x=(i(3597),{name:"CodeViewer",data(){return{code:""}},mounted(){this.$bus.$on("setCode",this.setCode),$.A.highlightAll()},methods:{setCode(t){this.code=t}},updated(){$.A.highlightAll()}}),k=x,z=(0,y.A)(k,b,w,!1,null,"7d673a07",null),A=z.exports,T=i(198),N=i(3347),S=i(417),P=i(5462),L={name:"Main",components:{GridLayout:c().GridLayout,GridItem:c().GridItem,StlViewer:C,CodeViewer:A},mounted(){this.$bus.$on("setCenter",this.setCenter)},data(){return{init:!1,showType:"Preview",geo:{dimension:3,wireframe:!0,factor:3,factor_normailize:!1,pos_normalize:!0,pos:{x:0,y:0,z:0},fileList:[],fileDetail:[]},layout:[],orderedLayout:[],layout_values:{},parameter:["Equations","Neural Network Architecture","Constraints"],parameter_type:"",parameter_selected:"",isSending:!1,output:{},totalCode:"",isDraggable:!0}},watch:{orderedLayout:{handler(){this.init&&this.getPreviewCode(),this.init++},immediate:!1},layout_values:{handler(){this.getPreviewCode()},deep:!0}},computed:{func_structure(){return u.ah},nn_structure(){return u.o_},cs_structure(){return u._$},options(){switch(this.parameter_type){case"Equations":return this.func_structure;case"Neural Network Architecture":return this.nn_structure;case"Constraints":return this.cs_structure;default:return[]}}},methods:{back(){this.$router.replace("/gate").catch((()=>{}))},tips(t,e){const i=this.$createElement;this.$notify({title:`${t} 填寫格式範例`,message:i("i",{style:"color: teal"},e.join("、"))})},changeScale(){this.$bus.$emit("handleStlConfig","scale",{factor:this.geo.factor})},changeDimension(){this.$bus.$emit("handleStlConfig","dimension",{dimension:this.geo.dimension})},toggleWireFrame(){this.$bus.$emit("handleWireFrame",this.geo.wireframe)},getCenter(){this.$bus.$emit("getStlCenter",this.geo.pos_normalize)},setCenter(t,e,i){this.geo.pos.x=t,this.geo.pos.y=e,this.geo.pos.z=i},addItem(){if(("Code Block"==this.parameter_type||""!=this.parameter_type&&""!=this.parameter_selected)&&""!=this.parameter_type){if("Code Block"!=this.parameter_type){var t=this.options[this.parameter_selected];this.layout.push({type:this.parameter_type,x:0,y:0,w:1,h:t.property.length+1.25,i:(0,N.Ak)(),detail:t})}else this.layout.push({type:this.parameter_type,x:0,y:0,w:1,h:7.25,i:(0,N.Ak)(),detail:""});this.parameter_type="",this.parameter_selected="",this.$nextTick((()=>{var t=this.$refs.config;this.$nextTick((function(){t.scrollTop=t.scrollHeight}))}))}},deleteItem(t){this.layout=this.layout.filter((e=>e.i!=t));for(const e in this.layout_values)this.layout_values.hasOwnProperty(e)&&e.includes(t)&&delete this.layout_values[e]},updateOrder(){this.orderedLayout=[...this.layout].sort(((t,e)=>t.y===e.y?t.x-e.x:t.y-e.y))},uploadCode(t){this.$refs[`${t}_code_file`][0].click()},handleUploadCode(t,e){this.$refs[`${t}_textArea`][0].value="";var i=this.$refs[`${t}_code_file`][0].files[0];if(i){const s=new FileReader;s.onload=i=>{const s=i.target.result;this.layout_values[`${t}_${e}`]=s},s.readAsText(i)}},handleTab(t){"Tab"===t.key&&t.preventDefault()},handleUpload(t){t=t.file;this.geo.fileList.push(t),this.geo.fileDetail.push({uid:t.uid,file:t,name:"",airtight:"True"}),this.$bus.$emit("loadStlFile",t,{wireframe:this.geo.wireframe,center_normalize:this.geo.pos_normalize,factor:this.geo.factor})},handleRemove(t,e){this.geo.fileList=e,this.$bus.$emit("removeStlFile",t.uid),this.geo.fileDetail=this.geo.fileDetail.filter((e=>e.uid!=t.uid))},handlePreview(t){},collect(){this.isSending=!0,this.output={dimensions:3,scale:1,center:[0,0,0],mesh:[],blocks:[]},this.output.dimensions=this.geo.dimension,this.output.scale=this.geo.factor,this.output.center=[this.geo.pos.x,this.geo.pos.y,this.geo.pos.z],this.geo.fileDetail.forEach((t=>{this.output.mesh.push({uuid:t.file.uid,name:t.name,type:"stl",filename:t.file.name,arguments:["airtight"],airtight:t.airtight,file:t.file})})),this.orderedLayout.forEach((t=>{if("Code Block"!=t.type){var e={uuid:"",name:"",type:"",function:"",arguments:[]};switch(e.uuid=t.i,e.function=t.detail.function,t.detail.property.forEach((t=>{"object"==typeof t?e.arguments.push(t.type):e.arguments.push(t)})),t.type){case"Equations":e.type="pde";break;case"Neural Network Architecture":e.type="arch";break;case"Constraints":e.type="constraint";break}e.arguments.forEach((t=>{e[t]=this.layout_values[`${e.uuid}_${e.function}_${t}`]})),e.arguments=e.arguments.filter((t=>"name"!=t)),this.output.blocks.push(e)}else{var i=this.layout_values[`${t.i}_${t.type}`];this.output.blocks.push({uuid:t.i,type:t.type,code:i})}})),this.isSending=!1,this.sendTest()},getPreviewCode(){S.A.get("/test.md").then((t=>{this.totalCode=t.data;const e=(0,T.A)();t.data=e.render(t.data),this.$bus.$emit("setCode",t.data)})).catch((t=>{console.log(t),this.$notify.error({title:"系統提示",message:"預覽代碼生成失敗！"})}))},send(){S.A.post("/run/module",{data:this.totalCode}).then((t=>{console.log(t.data)})).catch((t=>{console.log(t),this.$notify.error({title:"系統提示",message:"運行代碼失敗！"})}))},sendTest(){const t=new FormData;t.append("file",this.output.mesh[0].file),S.A.post("/run/upload",t,{headers:{"Content-Type":"multipart/form-data","user-token":P.A.get("token")}}).then((t=>{this.$router.replace("/list")})).catch((t=>{console.log(t),this.$notify.error({title:"系統提示",message:"運行代碼失敗！"})}))}}},F=L,B=(0,y.A)(F,n,r,!1,null,"388be13e",null),E=B.exports,D={name:"App",components:{Main:E}},O=D,I=(0,y.A)(O,a,o,!1,null,null,null),M=I.exports,j=i(1594),R=function(){var t=this,e=t._self._c;return e("div",{ref:"body",staticClass:"body"},[e("div",{staticClass:"title"},[e("div",{staticClass:"top",on:{click:function(e){return t.back()}}},[e("i",{staticClass:"fa-solid fa-arrow-left arrow"}),t._v("back")]),t._v("專案列表")]),e("div",{staticClass:"main"},[e("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%"},attrs:{"empty-text":"暫無數據",data:t.tableData.filter((e=>!t.search||e.name.toLowerCase().includes(t.search.toLowerCase()))),height:550},scopedSlots:t._u([{key:"empty",fn:function(i){return[t.isLoading?e("el-skeleton",{staticClass:"skeleton",attrs:{loading:t.isLoading,animated:""}}):t._e()]}}])},[e("el-table-column",{attrs:{label:"建立時間",prop:"date"}}),e("el-table-column",{attrs:{label:"專案名稱",prop:"filename"}}),e("el-table-column",{attrs:{label:"狀態",prop:"status"}}),e("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(i){return[e("el-input",{attrs:{size:"mini",placeholder:"輸入關鍵字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",disabled:"Ready"!=i.row.status},on:{click:function(e){"Ready"==i.row.status&&t.handleDownload(i.row.id,i.row.filename)}}},[t._v("下載")]),e("el-button",{attrs:{size:"mini",type:"danger",disabled:"Ready"!=i.row.status},on:{click:function(e){"Ready"==i.row.status&&t.handleDelete(i.row.id)}}},[t._v("刪除")])]}}])})],1)],1)])},W=[],H=(i(4603),i(7566),i(8721),i(8655)),V=i.n(H),q={name:"List",mounted(){this.vantaEffect=V()({el:this.$refs.body,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1,color:2155775,color2:58339,backgroundColor:16777215}),this.getList(),this.timer=setInterval((()=>{this.getList()}),5e3)},data(){return{tableData:[{}],search:"",isLoading:!0,timer:0}},methods:{getList(){S.A.get("/run/findAll",{headers:{"user-token":P.A.get("token")}}).then((t=>{this.tableData=t.data.reverse()})).catch((t=>{console.log(t)})).finally((()=>{this.isLoading=!1}))},back(){this.$router.replace("/gate").catch((()=>{}))},handleDownload(t,e){S.A.get(`/run/download/${t}`,{responseType:"blob"}).then((t=>{const i=new Blob([t.data],{type:e.split(".")[1]}),s=window.URL.createObjectURL(i),a=document.createElement("a");a.style.display="none",a.href=s,a.download=e,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s)})).catch((t=>console.log(t)))},handleDelete(t){S.A.delete(`/run/delete/${t}`).then((t=>{this.getList()})).catch((t=>console.log(t)))}},beforeDestroy(){this.vantaEffect&&this.vantaEffect.destroy(),clearInterval(this.timer)},updated(){this.$refs.table.style="background:transparent;"}},U=q,G=(0,y.A)(U,R,W,!1,null,"6f800d7b",null),J=G.exports,Z=function(){var t=this,e=t._self._c;return e("div",{ref:"main",staticClass:"main"},[e("div",{staticClass:"title"},[t._v("Welcome To Use PINNs Analyzer "),e("div",{staticClass:"out",on:{click:function(e){return t.logout()}}},[e("i",{staticClass:"fa-solid fa-arrow-right-from-bracket"}),t._v(" Log Out")])]),e("div",{staticClass:"blocks"},[e("div",{staticClass:"blk1 block",on:{click:function(e){return t.go("/main")}}},[e("div",{staticClass:"img img1"}),e("div",{staticClass:"text"},[t._v("New Topic")])]),e("div",{staticClass:"blk1 block",on:{click:function(e){return t.go("/list")}}},[e("div",{staticClass:"img img2"}),e("div",{staticClass:"text"},[t._v("Results")])]),e("div",{staticClass:"blk1 block",on:{click:function(e){return t.go("/viewer")}}},[e("div",{staticClass:"img img4"}),e("div",{staticClass:"text"},[t._v("Analyzer")])])])])},K=[],X=i(1788),Y=i.n(X),Q={name:"Gate",mounted(){this.vantaEffect=Y()({el:this.$refs.main,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1})},methods:{go(t){this.$router.replace(t).catch((()=>{}))},logout(){this.$confirm("確認登出?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((()=>{P.A.set("token",""),this.$router.replace("/login").catch((()=>{})),this.$message({type:"success",message:"登出成功!"})})).catch((()=>{}))}},beforeDestroy(){this.vantaEffect&&this.vantaEffect.destroy()}},tt=Q,et=(0,y.A)(tt,Z,K,!1,null,"0a24fc10",null),it=et.exports,st=function(){var t=this,e=t._self._c;return e("div",{ref:"vantaRef",staticClass:"body"},[e("div",{staticClass:"loginBox"},[e("div",[e("div",{staticClass:"title"},[t._v("Login Form")]),e("div",{staticClass:"inputBox"},[e("div",{staticClass:"input-title"},[t._v("Mail Address")]),e("el-input",{attrs:{placeholder:"请輸入電子信箱"},model:{value:t.mail,callback:function(e){t.mail=e},expression:"mail"}}),e("div",{staticClass:"input-title"},[t._v("Password")]),e("el-input",{attrs:{placeholder:"請輸入密碼","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticClass:"input-title"},[t._v("Verify Code")]),e("div",{staticClass:"verifyCode"},[e("div",{staticClass:"vc"},[e("el-input",{attrs:{clear:"vc-input",placeholder:"請輸入驗證碼"},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}})],1),e("div",{ref:"canvas",staticClass:"vc vc2"},[e("canvas",{attrs:{id:"canvas"},on:{click:t.handleClick}})])]),e("el-button",{staticClass:"btn",attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){return t.login()}}},[t._v(t._s(t.isLoading?"登入請求中...":"註冊 / 登入"))]),e("div",{staticClass:"subTitle"},[t._v(" Powered By NCHC ")])],1)])])])},at=[],ot=i(9602),nt=i.n(ot);class rt{constructor({id:t,width:e,height:i}){this.id=t,this.width=e||90,this.height=i||48,this.bit=4,this.lineNum=5,this.dotNum=40,this.ctx=null,this.pool="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.code="",this.init()}init(){if(!this.id)throw new Error("The id of canvas is required");const t=document.getElementById(this.id);if(!t)throw new Error("Can not find element by id");this.ctx=t.getContext("2d"),this.start()}start(){this.drawBg(),this.drawText(),this.drawLine(),this.drawDot()}drawBg(){this.ctx.save(),this.ctx.fillStyle=this.randomColor(180,230),this.ctx.fillRect(0,0,this.width,this.height),this.ctx.restore()}drawText(){this.code="";for(let t=0;t<this.bit;t++){const e=this.pool[this.randomNum(0,this.pool.length-1)];this.code+=e;const i=this.randomNum(18,35),s=this.randomNum(-30,30);this.ctx.save(),this.ctx.font=`${i}px Simhei`,this.ctx.textBaseline="top",this.ctx.fillStyle=this.randomColor(80,120),this.ctx.translate(20*t+8,this.height/2),this.ctx.rotate(s*Math.PI/180),this.ctx.fillText(e,0,-i/2),this.ctx.restore()}}drawLine(){for(let t=0;t<this.lineNum;t++)this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.randomNum(0,this.width),this.randomNum(0,this.height)),this.ctx.lineTo(this.randomNum(0,this.width),this.randomNum(0,this.height)),this.ctx.strokeStyle=this.randomColor(150,230),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()}drawDot(){for(let t=0;t<this.dotNum;t++)this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.randomNum(0,this.width),this.randomNum(0,this.height),1,0,2*Math.PI),this.ctx.closePath(),this.ctx.fillStyle=this.randomColor(150,200),this.ctx.fill(),this.ctx.restore()}randomNum(t,e){return Math.floor(Math.random()*(e-t+1)+t)}randomColor(t,e){const i=this.randomNum(t,e),s=this.randomNum(t,e),a=this.randomNum(t,e);return`rgb(${i},${s},${a})`}}var lt=rt,ct={name:"Login",data(){return{mail:"",password:"",verifyCode:"",isLoading:!1,imageVerify:""}},mounted(){this.vantaEffect=nt()({el:this.$refs.vantaRef,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1});var t=this.$refs.canvas.clientWidth;this.imageVerify=new lt({id:"canvas",width:t,height:42})},methods:{handleClick(){this.imageVerify.start()},login(){this.verifyCode!=this.imageVerify.code?this.$message({type:"error",message:"驗證碼錯誤"}):""==this.mail.trim()||""==this.password.trim()||""==this.verifyCode.trim()?this.$message({type:"warning",message:"資料不可為空"}):S.A.post("/verify/register",{mail:this.mail,password:this.password}).then((t=>{"object"==typeof t.data?(this.$message({type:"success",message:"登入成功！"}),P.A.set("token",t.data.token),this.$router.replace("/gate")):this.$message({type:"error",message:t.data})})).catch((t=>{console.log(t)}))}},beforeDestroy(){this.vantaEffect&&this.vantaEffect.destroy()}},ut=ct,dt=(0,y.A)(ut,st,at,!1,null,"3bb78c43",null),ht=dt.exports;s["default"].use(j.Ay);const pt=new j.Ay({routes:[{path:"/main",component:E},{path:"/gate",component:it},{path:"/list",component:J},{path:"/viewer",beforeEnter(){window.open("/vtk_viewer/index.html","_blank")}},{path:"/login",component:ht},{path:"/",redirect:"/gate"}]});pt.beforeEach(((t,e,i)=>{const s=P.A.get("token");"/login"===t.path||s?i():i("/login")}));var mt=pt,ft=i(4927),vt=i.n(ft);s["default"].config.productionTip=!1,s["default"].use(vt()),new s["default"]({render:t=>t(M),router:mt,beforeCreate(){s["default"].prototype.$bus=this}}).$mount("#app")}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var o=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,function(){i.amdO={}}(),function(){var t=[];i.O=function(e,s,a,o){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],a=t[u][1],o=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(r=!1,o<n&&(n=o));if(r){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,a,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,o,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var u=l(i)}for(e&&e(s);c<n.length;c++)o=n[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(u)},s=self["webpackChunkpinn_web"]=self["webpackChunkpinn_web"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(7637)}));s=i.O(s)})();
//# sourceMappingURL=app.8c9ed0c4.js.map