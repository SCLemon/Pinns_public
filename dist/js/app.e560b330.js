(function(){"use strict";var e={6086:function(e,t,i){var s=i(2856),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},o=[],n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("span",{staticClass:"radio"},[t("el-radio-group",{model:{value:e.showType,callback:function(t){e.showType=t},expression:"showType"}},[t("el-radio-button",{attrs:{label:"Preview"}}),t("el-radio-button",{attrs:{label:"Code"}})],1)],1),t("div",{ref:"config",staticClass:"config"},[t("div",{staticClass:"top",on:{click:function(t){return e.back()}}},[t("i",{staticClass:"fa-solid fa-arrow-left arrow"}),e._v("back")]),t("div",{staticClass:"geometry"},[t("div",{staticClass:"title"},[e._v("Geometry")]),t("div",{staticClass:"dimension"},[e._v(" dimension: "),t("el-input-number",{staticClass:"dimension_input",attrs:{"controls-position":"right",min:1,max:3},on:{change:function(t){return e.changeDimension()}},model:{value:e.geo.dimension,callback:function(t){e.$set(e.geo,"dimension",t)},expression:"geo.dimension"}})],1),t("div",{staticClass:"wireframe"},[e._v(" WireFrame: "),t("el-switch",{staticClass:"normalize_switch",attrs:{"active-color":"#13ce66"},on:{change:function(t){return e.toggleWireFrame()}},model:{value:e.geo.wireframe,callback:function(t){e.$set(e.geo,"wireframe",t)},expression:"geo.wireframe"}})],1),t("div",{staticClass:"geo_subTitle"},[e._v("Mesh")]),t("div",{staticClass:"mesh"},[t("el-upload",{staticClass:"upload",attrs:{action:"",accept:".stl,.vtp","http-request":e.handleUpload,"on-remove":e.handleRemove,"on-preview":e.handlePreview,multiple:"","file-list":e.geo.fileList,drag:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("將文件拖到此處，或"),t("em",[e._v("點擊上傳")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上傳 STL 文件")])]),t("div",{staticClass:"fileList"},e._l(e.geo.fileDetail,(function(i,s){return t("div",{key:s,staticClass:"fileItem"},[t("div",{staticClass:"fileTitle"},[e._v(e._s(i.file.name)+" ("+e._s((i.file.size/1024).toFixed(2))+" KB)")]),t("div",{staticClass:"fileOption"},[e._v(" name: "),t("input",{directives:[{name:"model",rawName:"v-model",value:i.name,expression:"item.name"}],staticClass:"fileOption_name",attrs:{type:"text"},domProps:{value:i.name},on:{input:function(t){t.target.composing||e.$set(i,"name",t.target.value)}}}),e._v("   airtight: "),t("select",{directives:[{name:"model",rawName:"v-model",value:i.airtight,expression:"item.airtight"}],staticClass:"fileOption_airtight",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(i,"airtight",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"True"}},[e._v("True")]),t("option",{attrs:{value:"False"}},[e._v("False")])])])])})),0)],1),t("div",{staticClass:"geo_subTitle"},[e._v("Center")]),t("div",{staticClass:"center"},[t("div",{staticClass:"pos-box"},[t("div",{staticClass:"pos"},[e._v("x: "),t("el-input",{staticClass:"pos-input",attrs:{placeholder:"请输入内容"},model:{value:e.geo.pos.x,callback:function(t){e.$set(e.geo.pos,"x",t)},expression:"geo.pos.x"}})],1),t("div",{staticClass:"pos"},[e._v("y: "),t("el-input",{staticClass:"pos-input",attrs:{placeholder:"请输入内容"},model:{value:e.geo.pos.y,callback:function(t){e.$set(e.geo.pos,"y",t)},expression:"geo.pos.y"}})],1),t("div",{staticClass:"pos"},[e._v("z: "),t("el-input",{staticClass:"pos-input",attrs:{placeholder:"请输入内容"},model:{value:e.geo.pos.z,callback:function(t){e.$set(e.geo.pos,"z",t)},expression:"geo.pos.z"}})],1)]),t("div",{staticClass:"pos_exec"},[e._v(" Normalize:"),t("el-switch",{staticClass:"normalize_switch",attrs:{"active-color":"#13ce66"},model:{value:e.geo.pos_normalize,callback:function(t){e.$set(e.geo,"pos_normalize",t)},expression:"geo.pos_normalize"}}),t("el-button",{staticClass:"normalize_btn",attrs:{type:"primary"},on:{click:function(t){return e.getCenter()}}},[e._v("Get Center")])],1)]),t("div",{staticClass:"geo_subTitle"},[e._v("Scale")]),t("div",{staticClass:"scale"},[e._v(" factor: "),t("el-input-number",{staticClass:"dimension_input",attrs:{"controls-position":"right",min:1},on:{change:function(t){return e.changeScale()}},model:{value:e.geo.factor,callback:function(t){e.$set(e.geo,"factor",t)},expression:"geo.factor"}}),t("el-checkbox",{staticClass:"factor_normalize",model:{value:e.geo.factor_normailize,callback:function(t){e.$set(e.geo,"factor_normailize",t)},expression:"geo.factor_normailize"}},[e._v("正規化")])],1)]),t("div",{staticClass:"function_part"},[t("div",{staticClass:"title"},[e._v("Parameter")]),t("div",{staticClass:"add"},[t("el-select",{staticClass:"add-select",attrs:{placeholder:"请選擇"},model:{value:e.parameter_type,callback:function(t){e.parameter_type=t},expression:"parameter_type"}},[e._l(e.parameter,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),t("el-option",{attrs:{label:"Code Block",value:"Code Block"}})],2),""!=e.parameter_type&&"Code Block"!=e.parameter_type?t("el-select",{staticClass:"add-select",attrs:{placeholder:"请選擇"},model:{value:e.parameter_selected,callback:function(t){e.parameter_selected=t},expression:"parameter_selected"}},e._l(e.options,(function(e){return t("el-option",{key:e.function,attrs:{label:e.function,value:e.function}})})),1):e._e(),t("el-button",{staticClass:"add-btn",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addItem()}}},[e._v("新增")])],1),t("grid-layout",{staticClass:"layout",attrs:{layout:e.layout,"col-num":1,rowHeight:40,"is-draggable":e.isDraggable,"is-resizable":!0,"is-mirrored":!1,"vertical-compact":!0,margin:[10,10],"use-css-transforms":!0},on:{"update:layout":function(t){e.layout=t},"layout-updated":function(t){return e.updateOrder()}}},e._l(e.layout,(function(i){return t("grid-item",{key:i.i,staticClass:"layout-item",attrs:{x:i.x,y:i.y,w:i.w,h:i.h,i:i.i}},["Code Block"!=i.type?t("div",[t("div",{staticClass:"func_name"},[e._v(" "+e._s(i.detail.function)+" "),t("div",{staticClass:"delete",on:{click:function(t){return e.deleteItem(i.i)}}},[t("i",{staticClass:"el-icon-delete"})])]),e._l(i.detail.property,(function(s,a){return t("div",{key:a,staticClass:"property"},[e._v(" "+e._s("object"!=typeof s?s:s.type)+": "),"object"!=typeof s?t("el-input",{staticClass:"property-input",attrs:{placeholder:"請輸入內容"},model:{value:e.layout_values[`${i.i}_${i.detail.function}_${s}`],callback:function(t){e.$set(e.layout_values,`${i.i}_${i.detail.function}_${s}`,t)},expression:"layout_values[`${item.i}_${item.detail.function}_${p}`]"}}):t("span",[t("el-input",{staticClass:"property-select",attrs:{placeholder:"請輸入內容"},on:{focus:function(t){return e.tips(s.type,s.options)}},model:{value:e.layout_values[`${i.i}_${i.detail.function}_${s.type}`],callback:function(t){e.$set(e.layout_values,`${i.i}_${i.detail.function}_${s.type}`,t)},expression:"layout_values[`${item.i}_${item.detail.function}_${p.type}`]"}})],1)],1)}))],2):t("div",[t("div",{staticClass:"func_name"},[e._v(" "+e._s(i.type)+" "),t("div",{staticClass:"upload_code",on:{click:function(t){return e.uploadCode(i.i)}}},[t("i",{staticClass:"el-icon-upload2"})]),t("div",{staticClass:"delete",on:{click:function(t){return e.deleteItem(i.i)}}},[t("i",{staticClass:"el-icon-delete"})]),t("input",{ref:`${i.i}_code_file`,refInFor:!0,staticClass:"code_file",attrs:{type:"file"},on:{change:function(t){return e.handleUploadCode(i.i,i.type)}}})]),t("div",{staticClass:"inputCode"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.layout_values[`${i.i}_${i.type}`],expression:"layout_values[`${item.i}_${item.type}`]"}],ref:`${i.i}_textArea`,refInFor:!0,staticClass:"textArea",domProps:{value:e.layout_values[`${i.i}_${i.type}`]},on:{keydown:e.handleTab,focus:function(t){e.isDraggable=!1},blur:function(t){e.isDraggable=!0},input:function(t){t.target.composing||e.$set(e.layout_values,`${i.i}_${i.type}`,t.target.value)}}})])])])})),1)],1),t("el-button",{staticClass:"send",attrs:{type:"primary",loading:e.isSending},on:{click:function(t){return e.collect()}}},[e._v(e._s(e.isSending?"資料建構中":"確認送出"))])],1),t("div",{staticClass:"content"},[t("stl-viewer",{directives:[{name:"show",rawName:"v-show",value:"Preview"==e.showType,expression:"showType=='Preview'"}]}),t("code-viewer",{directives:[{name:"show",rawName:"v-show",value:"Code"==e.showType,expression:"showType=='Code'"}]})],1)])},r=[],l=(i(4114),i(1176)),c=i.n(l),u=JSON.parse('{"ah":{"NavierStokes":{"function":"NavierStokes","property":["name","nu","rho","dim",{"type":"time","options":["True","False"]}]},"NormalDotVec":{"function":"NormalDotVec","property":["name",{"type":"vec","options":["[\'u\',\'v\',\'w\']","[\'u\',\'v\']","[\'u\']"]}]}},"o_":{"FullyConnectedArch":{"function":"FullyConnectedArch","property":["name",{"type":"input_keys","options":["[\'x\',\'y\',\'z\']","[\'x\',\'y\']","[\'x\']"]},{"type":"output_keys","options":["[\'u\',\'v\',\'w\',\'p\']","[\'u\',\'v\',\'p\']","[\'u\',\'p\']"]},"layer_size","nr_layers",{"type":"adaptive_activations","options":["True","False"]}]},"FourierNetArch":{"function":"FourierNetArch","property":["name",{"type":"input_keys","options":["[\'x\',\'y\',\'z\']","[\'x\',\'y\']","[\'x\']"]},{"type":"output_keys","options":["[\'u\',\'v\',\'w\',\'p\']","[\'u\',\'v\',\'p\']","[\'u\',\'p\']"]},"layer_size","nr_layers",{"type":"adaptive_activations","options":["True","False"]}]}},"_$":{"PointwiseBoundaryConstraint":{"function":"PointwiseBoundaryConstraint","property":["name","nodes","geometry","outvar","batch_size","bounds","criteria","lambda_weighting"]},"PointwiseInteriorConstraint":{"function":"PointwiseInteriorConstraint","property":["name","nodes","geometry","outvar","batch_size","bounds","criteria","lambda_weighting"]},"IntegralBoundaryConstraint":{"function":"IntegralBoundaryConstraint","property":["name","nodes","geometry","outvar","batch_size","bounds","criteria","lambda_weighting"]}}}'),d=function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"container"})},h=[],p=i(9318),m=i(8857),f=i(5729),v={name:"StlViewer",data(){return{scene:null,camera:null,renderer:null,mesh:null,controls:null}},watch:{"$refs.container.clientWidth":function(e){this.renderer.setSize(e,this.$refs.container.clientHeight),this.camera.aspect=e/this.$refs.container.clientHeight,this.camera.updateProjectionMatrix()},"$refs.container.clientHeight":function(e){this.renderer.setSize(this.$refs.container.clientWidth,e),this.camera.aspect=this.$refs.container.clientWidth/e,this.camera.updateProjectionMatrix()}},mounted(){this.$bus.$on("loadStlFile",this.loadFile),this.$bus.$on("removeStlFile",this.removeMesh),this.$bus.$on("handleStlConfig",this.handleConfig),this.$bus.$on("getStlCenter",this.getCenter),this.$bus.$on("handleWireFrame",this.handleWireFrame);const e=this.$refs.container;this.scene=new p.Z58,this.camera=new p.ubm(75,e.clientWidth/e.clientHeight,.1,1e3),this.camera.position.set(5,10,5),this.camera.lookAt(0,0,0),this.renderer=new p.JeP,this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.setClearColor(16777215),e.appendChild(this.renderer.domElement);const t=new p.ZyN(16777215,1);t.position.set(1,1,1).normalize(),this.scene.add(t);const i=new p.$p8(4210752);this.scene.add(i),this.gridHelper=new p.fTw(1e3,1e3),this.scene.add(this.gridHelper);const s=new p.IzY(1e3);this.scene.add(s),this.controls=new f.N(this.camera,this.renderer.domElement),this.controls.enableRotate=!0,this.controls.enablePan=!0,this.controls.addEventListener("change",this.renderScene),this.renderer.render(this.scene,this.camera)},methods:{renderScene(){this.renderer.render(this.scene,this.camera)},handleWireFrame(e){this.scene.traverse((t=>{t instanceof p.eaF&&(t.material.wireframe=e)}))},getCenter(e){const t=[],i=new p.Pq0;this.scene.traverse((e=>{e instanceof p.eaF&&t.push(e)})),t.forEach((e=>{e.geometry.computeBoundingBox();const t=e.geometry.boundingBox,s=new p.Pq0;t.getCenter(s),i.add(s)})),i.divideScalar(t.length),e&&(t.forEach((e=>{e.geometry.translate(-i.x,-i.y,-i.z)})),i.normalize()),this.$bus.$emit("setCenter",i.x,i.y,i.z)},handleConfig(e,t){if("scale"==e){const e=(new p.NRn).setFromObject(this.mesh),i=new p.Pq0;e.getSize(i);const s=Math.max(i.x,i.y,i.z),a=t.factor/s;this.scene.traverse((function(e){e instanceof p.eaF&&(e.scale.x*=a,e.scale.y*=a,e.scale.z*=a)}))}},removeMesh(e){const t=this.scene.getObjectByName(e);t&&(this.scene.remove(t),t.geometry.dispose(),t.material.dispose()),this.getCenter()},loadFile(e,t){if(!e.name.includes(".stl"))return;const i=new FileReader;i.onload=i=>{const s=i.target.result,a=new m.t,o=a.parse(s),n=new p.tXL({color:6316128,specular:1118481,shininess:200,wireframe:t.wireframe});this.mesh=new p.eaF(o,n),this.mesh.name=e.uid;const r=(new p.NRn).setFromObject(this.mesh),l=new p.Pq0;r.getSize(l);const c=Math.max(l.x,l.y,l.z),u=t.factor/c;this.mesh.scale.set(u,u,u),this.scene.add(this.mesh),this.getCenter(t.center_normalize)},i.readAsArrayBuffer(e)}}},g=v,y=i(1656),_=(0,y.A)(g,d,h,!1,null,"0c4f3346",null),C=_.exports,b=function(){var e=this,t=e._self._c;return t("div",[""!=e.code?t("div",{staticClass:"codeBlock",domProps:{innerHTML:e._s(e.code)}}):e._e(),t("el-empty",{staticClass:"codeBlock",attrs:{description:"Nothing Here"}})],1)},w=[],$=i(2143),x=(i(3597),{name:"CodeViewer",data(){return{code:""}},mounted(){this.$bus.$on("setCode",this.setCode),$.A.highlightAll()},methods:{setCode(e){this.code=e}},updated(){$.A.highlightAll()}}),k=x,z=(0,y.A)(k,b,w,!1,null,"7d673a07",null),A=z.exports,T=i(198),N=i(3347),S=i(417),L=i(5462),P={name:"Main",components:{GridLayout:c().GridLayout,GridItem:c().GridItem,StlViewer:C,CodeViewer:A},mounted(){this.$bus.$on("setCenter",this.setCenter)},data(){return{init:!1,showType:"Preview",geo:{dimension:3,wireframe:!0,factor:3,factor_normailize:!1,pos_normalize:!0,pos:{x:0,y:0,z:0},fileList:[],fileDetail:[]},layout:[],orderedLayout:[],layout_values:{},parameter:["Equations","Neural Network Architecture","Constraints"],parameter_type:"",parameter_selected:"",isSending:!1,output:{},totalCode:"",isDraggable:!0}},watch:{orderedLayout:{handler(){this.init&&this.getPreviewCode(),this.init++},immediate:!1},layout_values:{handler(){this.getPreviewCode()},deep:!0}},computed:{func_structure(){return u.ah},nn_structure(){return u.o_},cs_structure(){return u._$},options(){switch(this.parameter_type){case"Equations":return this.func_structure;case"Neural Network Architecture":return this.nn_structure;case"Constraints":return this.cs_structure;default:return[]}}},methods:{back(){this.$router.replace("/gate").catch((()=>{}))},tips(e,t){const i=this.$createElement;this.$notify({title:`${e} 填寫格式範例`,message:i("i",{style:"color: teal"},t.join("、"))})},changeScale(){this.$bus.$emit("handleStlConfig","scale",{factor:this.geo.factor})},changeDimension(){this.$bus.$emit("handleStlConfig","dimension",{dimension:this.geo.dimension})},toggleWireFrame(){this.$bus.$emit("handleWireFrame",this.geo.wireframe)},getCenter(){this.$bus.$emit("getStlCenter",this.geo.pos_normalize)},setCenter(e,t,i){this.geo.pos.x=e,this.geo.pos.y=t,this.geo.pos.z=i},addItem(){if(("Code Block"==this.parameter_type||""!=this.parameter_type&&""!=this.parameter_selected)&&""!=this.parameter_type){if("Code Block"!=this.parameter_type){var e=this.options[this.parameter_selected];this.layout.push({type:this.parameter_type,x:0,y:0,w:1,h:e.property.length+1.25,i:(0,N.Ak)(),detail:e})}else this.layout.push({type:this.parameter_type,x:0,y:0,w:1,h:7.25,i:(0,N.Ak)(),detail:""});this.parameter_type="",this.parameter_selected="",this.$nextTick((()=>{var e=this.$refs.config;this.$nextTick((function(){e.scrollTop=e.scrollHeight}))}))}},deleteItem(e){this.layout=this.layout.filter((t=>t.i!=e));for(const t in this.layout_values)this.layout_values.hasOwnProperty(t)&&t.includes(e)&&delete this.layout_values[t]},updateOrder(){this.orderedLayout=[...this.layout].sort(((e,t)=>e.y===t.y?e.x-t.x:e.y-t.y))},uploadCode(e){this.$refs[`${e}_code_file`][0].click()},handleUploadCode(e,t){this.$refs[`${e}_textArea`][0].value="";var i=this.$refs[`${e}_code_file`][0].files[0];if(i){const s=new FileReader;s.onload=i=>{const s=i.target.result;this.layout_values[`${e}_${t}`]=s},s.readAsText(i)}},handleTab(e){"Tab"===e.key&&e.preventDefault()},handleUpload(e){e=e.file;this.geo.fileList.push(e),this.geo.fileDetail.push({uid:e.uid,file:e,name:"",airtight:"True"}),this.$bus.$emit("loadStlFile",e,{wireframe:this.geo.wireframe,center_normalize:this.geo.pos_normalize,factor:this.geo.factor})},handleRemove(e,t){this.geo.fileList=t,this.$bus.$emit("removeStlFile",e.uid),this.geo.fileDetail=this.geo.fileDetail.filter((t=>t.uid!=e.uid))},handlePreview(e){},collect(){this.isSending=!0,this.output={dimensions:3,scale:1,center:[0,0,0],mesh:[],blocks:[]},this.output.dimensions=this.geo.dimension,this.output.scale=this.geo.factor,this.output.center=[this.geo.pos.x,this.geo.pos.y,this.geo.pos.z],this.geo.fileDetail.forEach((e=>{this.output.mesh.push({uuid:e.file.uid,name:e.name,type:"stl",filename:e.file.name,arguments:["airtight"],airtight:e.airtight})})),this.orderedLayout.forEach((e=>{if("Code Block"!=e.type){var t={uuid:"",name:"",type:"",function:"",arguments:[]};switch(t.uuid=e.i,t.function=e.detail.function,e.detail.property.forEach((e=>{"object"==typeof e?t.arguments.push(e.type):t.arguments.push(e)})),e.type){case"Equations":t.type="pde";break;case"Neural Network Architecture":t.type="arch";break;case"Constraints":t.type="constraint";break}t.arguments.forEach((e=>{t[e]=this.layout_values[`${t.uuid}_${t.function}_${e}`]})),t.arguments=t.arguments.filter((e=>"name"!=e)),this.output.blocks.push(t)}else{var i=this.layout_values[`${e.i}_${e.type}`];this.output.blocks.push({uuid:e.i,type:e.type,code:i})}})),this.isSending=!1,this.sendTest()},getPreviewCode(){S.A.get("/test.md").then((e=>{this.totalCode=e.data;const t=(0,T.A)();e.data=t.render(e.data),this.$bus.$emit("setCode",e.data)})).catch((e=>{console.log(e),this.$notify.error({title:"系統提示",message:"預覽代碼生成失敗！"})}))},send(){S.A.post("/run/module",{data:this.totalCode}).then((e=>{console.log(e.data)})).catch((e=>{console.log(e),this.$notify.error({title:"系統提示",message:"運行代碼失敗！"})}))},sendTest(){const e=new FormData;e.append("file",this.geo.fileList[0]),e.append("filename",this.geo.fileList[0].name),S.A.post("/run/upload",e,{headers:{"Content-Type":"multipart/form-data","user-token":L.A.get("token")}}).then((e=>{this.$router.replace("/list")})).catch((e=>{console.log(e),this.$notify.error({title:"系統提示",message:"運行代碼失敗！"})}))}}},F=P,B=(0,y.A)(F,n,r,!1,null,"d996b47a",null),E=B.exports,D={name:"App",components:{Main:E}},O=D,I=(0,y.A)(O,a,o,!1,null,null,null),M=I.exports,j=i(1594),R=function(){var e=this,t=e._self._c;return t("div",{ref:"body",staticClass:"body"},[t("div",{staticClass:"title"},[t("div",{staticClass:"top",on:{click:function(t){return e.back()}}},[t("i",{staticClass:"fa-solid fa-arrow-left arrow"}),e._v("back")]),e._v("專案列表")]),t("div",{staticClass:"main"},[t("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%"},attrs:{"empty-text":"暫無數據",data:e.tableData.filter((t=>!e.search||t.name.toLowerCase().includes(e.search.toLowerCase()))),height:550},scopedSlots:e._u([{key:"empty",fn:function(i){return[e.isLoading?t("el-skeleton",{staticClass:"skeleton",attrs:{loading:e.isLoading,animated:""}}):e._e()]}}])},[t("el-table-column",{attrs:{label:"建立時間",prop:"date"}}),t("el-table-column",{attrs:{label:"專案名稱",prop:"filename"}}),t("el-table-column",{attrs:{label:"狀態",prop:"status"}}),t("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(i){return[t("el-input",{attrs:{size:"mini",placeholder:"輸入關鍵字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"mini",disabled:"Ready"!=i.row.status},on:{click:function(t){"Ready"==i.row.status&&e.handleDownload(i.row.id,i.row.filename)}}},[e._v("下載")]),t("el-button",{attrs:{size:"mini",type:"danger",disabled:"Ready"!=i.row.status},on:{click:function(t){"Ready"==i.row.status&&e.handleDelete(i.row.id)}}},[e._v("刪除")])]}}])})],1)],1)])},W=[],H=(i(4603),i(7566),i(8721),i(8655)),V=i.n(H),q={name:"List",mounted(){this.vantaEffect=V()({el:this.$refs.body,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1,color:2155775,color2:58339,backgroundColor:16777215}),this.getList(),this.timer=setInterval((()=>{this.getList()}),5e3)},data(){return{tableData:[],search:"",isLoading:!0,timer:0}},methods:{getList(){S.A.get("/run/findAll",{headers:{"user-token":L.A.get("token")}}).then((e=>{this.tableData=e.data.reverse()})).catch((e=>{console.log(e)})).finally((()=>{this.isLoading=!1}))},back(){this.$router.replace("/gate").catch((()=>{}))},handleDownload(e,t){S.A.get(`/run/download/${e}`,{responseType:"blob"}).then((e=>{const i=new Blob([e.data],{type:t.split(".")[1]}),s=window.URL.createObjectURL(i),a=document.createElement("a");a.style.display="none",a.href=s,a.download=t,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s)})).catch((e=>console.log(e)))},handleDelete(e){S.A.delete(`/run/delete/${e}`).then((e=>{this.getList()})).catch((e=>console.log(e)))}},beforeDestroy(){this.vantaEffect&&this.vantaEffect.destroy(),clearInterval(this.timer)},updated(){this.$refs.table.style="background:transparent;"}},U=q,G=(0,y.A)(U,R,W,!1,null,"a5892bc6",null),J=G.exports,Z=function(){var e=this,t=e._self._c;return t("div",{ref:"main",staticClass:"main"},[t("div",{staticClass:"title"},[e._v("Welcome To Use PINNs Analyzer "),t("div",{staticClass:"out",on:{click:function(t){return e.logout()}}},[t("i",{staticClass:"fa-solid fa-arrow-right-from-bracket"}),e._v(" Log Out")])]),t("div",{staticClass:"blocks"},[t("div",{staticClass:"blk1 block",on:{click:function(t){return e.go("/main")}}},[t("div",{staticClass:"img img1"}),t("div",{staticClass:"text"},[e._v("New Topic")])]),t("div",{staticClass:"blk1 block",on:{click:function(t){return e.go("/list")}}},[t("div",{staticClass:"img img2"}),t("div",{staticClass:"text"},[e._v("Results")])]),t("div",{staticClass:"blk1 block",on:{click:function(t){return e.go("/viewer")}}},[t("div",{staticClass:"img img4"}),t("div",{staticClass:"text"},[e._v("Analyzer")])])])])},K=[],X=i(1788),Y=i.n(X),Q={name:"Gate",mounted(){this.vantaEffect=Y()({el:this.$refs.main,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1})},methods:{go(e){this.$router.replace(e).catch((()=>{}))},logout(){this.$confirm("確認登出?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((()=>{L.A.set("token",""),this.$router.replace("/login").catch((()=>{})),this.$message({type:"success",message:"登出成功!"})})).catch((()=>{}))}},beforeDestroy(){this.vantaEffect&&this.vantaEffect.destroy()}},ee=Q,te=(0,y.A)(ee,Z,K,!1,null,"0a24fc10",null),ie=te.exports,se=function(){var e=this,t=e._self._c;return t("div",{ref:"vantaRef",staticClass:"body"},[t("div",{staticClass:"loginBox"},[t("div",[t("div",{staticClass:"title"},[e._v("Login Form")]),t("div",{staticClass:"inputBox"},[t("div",{staticClass:"input-title"},[e._v("Mail Address")]),t("el-input",{attrs:{placeholder:"请輸入電子信箱"},model:{value:e.mail,callback:function(t){e.mail=t},expression:"mail"}}),t("div",{staticClass:"input-title"},[e._v("Password")]),t("el-input",{attrs:{placeholder:"請輸入密碼","show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("div",{staticClass:"input-title"},[e._v("Verify Code")]),t("div",{staticClass:"verifyCode"},[t("div",{staticClass:"vc"},[t("el-input",{attrs:{clear:"vc-input",placeholder:"請輸入驗證碼"},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}})],1),t("div",{ref:"canvas",staticClass:"vc vc2"},[t("canvas",{attrs:{id:"canvas"},on:{click:e.handleClick}})])]),t("el-button",{staticClass:"btn",attrs:{type:"primary",loading:e.isLoading},on:{click:function(t){return e.login()}}},[e._v(e._s(e.isLoading?"登入請求中...":"註冊 / 登入"))]),t("div",{staticClass:"subTitle"},[e._v(" Powered By NCHC ")])],1)])])])},ae=[],oe=i(9602),ne=i.n(oe);class re{constructor({id:e,width:t,height:i}){this.id=e,this.width=t||90,this.height=i||48,this.bit=4,this.lineNum=5,this.dotNum=40,this.ctx=null,this.pool="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.code="",this.init()}init(){if(!this.id)throw new Error("The id of canvas is required");const e=document.getElementById(this.id);if(!e)throw new Error("Can not find element by id");this.ctx=e.getContext("2d"),this.start()}start(){this.drawBg(),this.drawText(),this.drawLine(),this.drawDot()}drawBg(){this.ctx.save(),this.ctx.fillStyle=this.randomColor(180,230),this.ctx.fillRect(0,0,this.width,this.height),this.ctx.restore()}drawText(){this.code="";for(let e=0;e<this.bit;e++){const t=this.pool[this.randomNum(0,this.pool.length-1)];this.code+=t;const i=this.randomNum(18,35),s=this.randomNum(-30,30);this.ctx.save(),this.ctx.font=`${i}px Simhei`,this.ctx.textBaseline="top",this.ctx.fillStyle=this.randomColor(80,120),this.ctx.translate(20*e+8,this.height/2),this.ctx.rotate(s*Math.PI/180),this.ctx.fillText(t,0,-i/2),this.ctx.restore()}}drawLine(){for(let e=0;e<this.lineNum;e++)this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.randomNum(0,this.width),this.randomNum(0,this.height)),this.ctx.lineTo(this.randomNum(0,this.width),this.randomNum(0,this.height)),this.ctx.strokeStyle=this.randomColor(150,230),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()}drawDot(){for(let e=0;e<this.dotNum;e++)this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.randomNum(0,this.width),this.randomNum(0,this.height),1,0,2*Math.PI),this.ctx.closePath(),this.ctx.fillStyle=this.randomColor(150,200),this.ctx.fill(),this.ctx.restore()}randomNum(e,t){return Math.floor(Math.random()*(t-e+1)+e)}randomColor(e,t){const i=this.randomNum(e,t),s=this.randomNum(e,t),a=this.randomNum(e,t);return`rgb(${i},${s},${a})`}}var le=re,ce={name:"Login",data(){return{mail:"",password:"",verifyCode:"",isLoading:!1,imageVerify:""}},mounted(){this.vantaEffect=ne()({el:this.$refs.vantaRef,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1});var e=this.$refs.canvas.clientWidth;this.imageVerify=new le({id:"canvas",width:e,height:42})},methods:{handleClick(){this.imageVerify.start()},login(){this.verifyCode!=this.imageVerify.code?this.$message({type:"error",message:"驗證碼錯誤"}):""==this.mail.trim()||""==this.password.trim()||""==this.verifyCode.trim()?this.$message({type:"warning",message:"資料不可為空"}):S.A.post("/verify/register",{mail:this.mail,password:this.password}).then((e=>{"object"==typeof e.data?(this.$message({type:"success",message:e.data.message}),L.A.set("token",e.data.token),this.$router.replace("/gate")):this.$message({type:"error",message:e.data})})).catch((e=>{console.log(e)}))}},beforeDestroy(){this.vantaEffect&&this.vantaEffect.destroy()}},ue=ce,de=(0,y.A)(ue,se,ae,!1,null,"32ca513a",null),he=de.exports;s["default"].use(j.Ay);const pe=new j.Ay({routes:[{path:"/main",component:E},{path:"/gate",component:ie},{path:"/list",component:J},{path:"/viewer",beforeEnter(){window.open("/vtk_viewer/index.html","_blank")}},{path:"/login",component:he},{path:"/",redirect:"/gate"}]});pe.beforeEach(((e,t,i)=>{const s=L.A.get("token");"/login"===e.path||s?i():i("/login")}));var me=pe,fe=i(4927),ve=i.n(fe);s["default"].config.productionTip=!1,s["default"].use(ve()),new s["default"]({render:e=>e(M),router:me,beforeCreate(){s["default"].prototype.$bus=this}}).$mount("#app")}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,function(){i.amdO={}}(),function(){var e=[];i.O=function(t,s,a,o){if(!s){var n=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],o=e[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((function(e){return i.O[e](s[l])}))?s.splice(l--,1):(r=!1,o<n&&(n=o));if(r){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var u=l(i)}for(t&&t(s);c<n.length;c++)o=n[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(u)},s=self["webpackChunkpinn_web"]=self["webpackChunkpinn_web"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(6086)}));s=i.O(s)})();
//# sourceMappingURL=app.e560b330.js.map